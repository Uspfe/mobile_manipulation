planner:
  sot_type: "SoTSequentialTasks"
  vicon_mark_swarm_estimation_topic_name: "swarm_state"
  use_joy: True
  seat_pos:
    - [0, -3]
    - [-3.25, -1]
    - [-3.25, 1]
    - [0, 3]
    - [3.25, 1]
    - [3.25, -1]

  ee_target_pos_xy:
    - [1, 1]
    - [1, 3]
    - [1, 5]

  base_target_pos:
    - [0, 1]
    - [0, 3]
    - [0, 5]

  base_tracking_err_tol: 0.2
  base_cruise_speed: 0.5
  initial_base_pos: [0, 0]
  initial_waypoints_index: [0,1,2]  # index start from 0
  initial_ee_target_pos_z: [0.8, 0.8, 0.8]

simulation:
  duration: 200
  robot:
    urdf:
      package: "mmseq_assets"
      path: "thing/urdf/thing_pyb.urdf"
      includes:
        - "$(find mobile_manipulation_central)/urdf/xacro/cartesian_base_joints.urdf.xacro"
        - "$(find mobile_manipulation_central)/urdf/xacro/thing_no_wheels.urdf.xacro"
        - "$(find mmseq_assets)/thing/xacro/end_effector_box.urdf.xacro"
        - "$(find mmseq_assets)/thing/xacro/collision.urdf.xacro"
      args:
        use_collision: "false"
        transform_params: "$(find mmseq_run)/config/robot/box_container.yaml"

controller:
  ee_upward_constraint_enabled: True
  collision_safety_margin: 
    self: 0.2
  ee_upward_deviation_angle_max: 0.26    #rad, 0.26 rad ~ 15 degree



    # soft constraints parameters
  xu_soft:
    mu: 0.003
    zeta: 0.005
  collision_soft:
    self:
      mu: 0.001
      zeta: 0.005
  ee_upward_soft:
    mu: 0.001
    zeta: 0.01

  # weights for each cost function
  cost_params:
    EEPos3:
      Qk: 0.8
      P: 10.
    BasePos2:
      Qk: 1.
      P: 10.
    Effort:
      Qqa: 0.
      Qqb: 0.
      Qva: 0.2
      Qvb: 0.1
      Qua: 0.025
      Qub: 0.1
      Qdua: 0.0
      Qdub: 0.05

  robot:
    limits:
      state:
        lower: [ -2, -10, -2.pi, -0.1pi, -1pi, -1pi, -1pi, -0.2pi, -1pi,
                 -0.5, -0.5, -1, -0.5, -1, -1., -2, -2, -2]
        upper: [ 2, 10, 2pi, 1.pi, 1pi, 1pi, 1pi, 1pi, 1pi,
                 0.5, 0.5, 1, 0.5, 1, 1., 2, 2, 2 ]
    urdf:
      package: "mmseq_assets"
      path: "thing/urdf/thing_ocs2.urdf"
      includes:
        - "$(find mobile_manipulation_central)/urdf/xacro/thing_no_wheels.urdf.xacro"
        - "$(find mmseq_assets)/thing/xacro/end_effector_box.urdf.xacro"
        - "$(find mmseq_assets)/thing/xacro/collision.urdf.xacro"
      args:
        use_collision: "True"
        transform_params: "$(find mmseq_run)/config/robot/box_container.yaml"


include:
  - package: "mmseq_run"
    path: "config/robot/thing.yaml"
  - package: "mmseq_run"
    path: "config/controller/HTMPC.yaml"
  - package: "mmseq_run"
    path: "config/sim/simulation.yaml"
  - package: "mmseq_run"
    path: "config/scene/restaurant.yaml"

logging:
  log_dir: "/home/tracy/Documents/PhD/data/demo"
  log_level: 20 # 0 - not set, 10 - debug, 20 - info
