# Integration Test: End Stop with Velocity Check
# Tests: PathPlanner end_stop functionality with velocity checks
# This verifies that PathPlanner.checkFinished correctly uses velocity
# from state dictionary for end_stop condition
# All path points are in world frame

planner:
  tasks:
  - name: Path with End Stop
    planner_type: PathPlanner
    base_path: [[0, 0, 0], [1.0, 0.2, 0.5], [2.0, 0.5, 1.0]]  # World frame: [x, y, yaw]
    ee_path: [[1.0, 0.0, 0.8, 0, 0, 0], [1, 0.2, 2.5, 3.14, 0, 0], [2, 0.5, 2.5, 0, 0, 0]]  # World frame
    dt: 1.0
    tracking_err_tol: 0.5
    tracking_ori_err_tol: 0.5
    end_stop: true  # Requires both position and velocity checks

controller:
  self_collision_avoidance_enabled: True
  static_obstacles_collision_avoidance_enabled: False
  acados:
    name: "TestEndStopVelocity"

simulation:
  duration: 4

include:
  - package: "mm_run"
    path: "config/robot/thing.yaml"
  - package: "mm_run"
    path: "config/controller/MPC.yaml"
  - package: "mm_run"
    path: "config/sim/simulation.yaml"
  - package: "mm_run"
    path: "config/scene/empty.yaml"

logging:
  log_dir: "test_experiments/end_stop_velocity"
  log_level: 10
